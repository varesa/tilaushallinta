<!--!
# This source code is licensed under the terms of the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.
# To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/.
# Copyright Esa Varemo 2014-2015
-->

<metal:main metal:use-macro="load: ../master.pt">
    <metal:main metal:fill-slot="title">Tilauslista</metal:main>

    <metal:main metal:fill-slot="head_custom">
        <link rel="stylesheet" type="text/css" href="/static/css/order_list.css">
    </metal:main>

    <metal:main metal:fill-slot="content">
        <div class="panel panel-default">
            <div class="panel-heading">
                Huoltosopimukset
            </div>
            <table class="table table-hover">
                <tr>
                    <th>#</th>
                    <!--<th>Tila</th>-->
                    <th>Tilaaja</th>
                    <th>Kohteen osoite</th>
                </tr>
                <tr tal:repeat="sopimus huoltosopimukset" onclick="window.location.href='/tilaukset/' + ${sopimus.id}">
                    <td>${sopimus.date.strftime("%y%m%d-%H%M")}</td>
                    <!--<td tal:condition="sopimus.tila == 'UUSI'"><span class="sopimus_tila tila_uusi">Uusi</span></td>
                    <td tal:condition="sopimus.tila == 'HYVAKSYTTY'"><span class="sopimus_tila tila_hyvaksytty">Hyv√§ksytty</span></td>
                    <td tal:condition="sopimus.tila == 'ALOITETTU'"><span class="sopimus_tila tila_aloitettu">Aloitettu</span></td>
                    <td tal:condition="sopimus.tila == 'VALMIS'"><span class="sopimus_tila tila_valmis">Valmis</span></td>-->
                    <?python tilaaja = sopimus.tilaaja.nimi + ', ' + sopimus.tilaaja.yritys \
                            if len(sopimus.tilaaja.nimi) and len(sopimus.tilaaja.yritys) \
                            else sopimus.tilaaja.nimi + sopimus.tilaaja.yritys ?>
                    <td>${tilaaja}&nbsp;&nbsp;&nbsp;</td>
                    <td>${sopimus.kohde.osoite}, ${sopimus.kohde.postinumero} ${sopimus.kohde.postitoimipaikka}</td>
                </tr>
            </table>
        </div>
    </metal:main>
</metal:main>
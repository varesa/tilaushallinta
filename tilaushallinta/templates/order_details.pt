<!--!
# This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/.
# Author: Esa Varemo
-->

<metal:main metal:use-macro="load: master.pt">
    <metal:main metal:fill-slot="title">Tilauksen tiedot</metal:main>

    <metal:main metal:fill-slot="head_custom">
        <link rel="stylesheet" href="/static/lomake.css">
    </metal:main>

    <metal:main metal:fill-slot="content">
        <div class="panel panel-default">
            <div class="panel-body">
                <h2>Perustiedot</h2>
                <table id="table_lomake">
                    <form method="post">
                        <input type="hidden" name="data" value="perustiedot">
                        
                        <input type="hidden" name="tilaaja_id" value="${tilaus.tilaaja.id}">
                        <input type="hidden" name="tilaaja_uuid" value="${tilaus.tilaaja.uuid}">
                        
                        <input type="hidden" name="kohde_id" value="${tilaus.kohde.id}">
                        <input type="hidden" name="kohde_uuid" value="${tilaus.kohde.uuid}">
                        
                        <input type="hidden" name="tilaus_id" value="${tilaus.id}">
                        <input type="hidden" name="tilaus_uuid" value="${tilaus.uuid}">
                        
                        <tr>
                            <td><h3>Laskutus</h3></td> <td><h3>Työ</h3></td>
                        </tr>
                        <tr>
                            <td>Nimi:<br><input readonly name="tilaaja_nimi" value="${tilaus.tilaaja.nimi}"></td>
                            <td>Nimi:<br><input readonly name="kohde_nimi" value="${tilaus.kohde.nimi}"></td>
                        </tr>
                        <tr>
                            <td>Yritys:<br><input readonly name="tilaaja_yritys" value="${tilaus.tilaaja.yritys}"></td>
                            <td>Yritys:<br><input readonly name="kohde_yritys"  value="${tilaus.kohde.yritys}"></td>
                        </tr>
                        <tr>
                            <td>Osoite1:<br><input readonly name="tilaaja_osoite1" value="${tilaus.tilaaja.osoite1}"></td>
                            <td>Osoite1:<br><input readonly name="kohde_osoite1" value="${tilaus.kohde.osoite1}"></td>
                        </tr>
                        <tr>
                            <td>Osoite2:<br><input readonly name="tilaaja_osoite2" value="${tilaus.tilaaja.osoite2}"></td>
                            <td>Osoite2:<br><input readonly name="kohde_osoite2" value="${tilaus.kohde.osoite2}"></td>
                        </tr>
                        <tr>
                            <td>Puhelin:<br><input readonly name="tilaaja_puh" value="${tilaus.tilaaja.puhelin}"></td>
                            <td>Puhelin:<br><input readonly name="kohde_puh" value="${tilaus.kohde.puhelin}"></td>
                        </tr>
                        <tr>
                            <td>Sähköposti:<br><input readonly name="tilaaja_email" value="${tilaus.tilaaja.email}"></td>
                            <td>Sähköposti:<br><input readonly name="kohde_email" value="${tilaus.kohde.email}"></td>
                        </tr>

                        <tr>
                            <td colspan="2">
                                Muut yhteyshenkilöt:<br>
                                <textarea name="muut_yhteysh">${tilaus.muut_yhteysh}</textarea>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2">Työn kuvaus:<br><textarea name="tyo">${tilaus.tyo}</textarea></td>
                        </tr>

                        <tr>
                            <td>Maksuaika: <input readonly type="number" class="short" name="maksuaika" value="${tilaus.maksuaika}"></td>
                        </tr>

                        <tr>
                            <td><input readonly type="reset" value="Kumoa"><td><input readonly type="submit" value="Päivitä"></td></td>
                        </tr>
                    </form>
                </table>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-body">
                <h3>Päiväraportit</h3>
                <table class="table" id="table_paivaraportit">
                    <tr tal:repeat="raportti tilaus.paivaraportit">
                        <td class="raportti_col1">${raportti.date.strftime("%d.%m.%y %H:%M")}<textarea>${raportti.teksti}</textarea></td>
                        <td class="raportti_col2">
                            <table>
                                <tr>
                                    <td>Tunnit:</td><td><input value="${raportti.tunnit}"></td>
                                </tr>
                                <tr>
                                    <td>Matkat:</td><td><input value="${raportti.matkat}"></td>
                                </tr>
                                <tr>
                                    <td>Muut:</td><td><input value="${raportti.muut}"></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <a name="paivaraportit"></a>
                    <form method="post" action="#paivaraportit">
                        <input type="hidden" name="data" value="paivaraportti">
                        <tr>
                            <td class="raportti_col1">${current_date.strftime("%d.%m.%y %H:%M")}<textarea name="kuvaus"></textarea></td>
                            <td class="raportti_col2">
                                <table>
                                    <tr>
                                        <td>Tunnit:</td><td><input name="tunnit" value="0"></td>
                                    </tr>
                                    <tr>
                                        <td>Matkat:</td><td><input name="matkat" value="0"></td>
                                    </tr>
                                    <tr>
                                        <td>Muut:</td><td><input name="muut" value="0"></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <input type="submit" value="Lisää">
                            </td>
                        </tr>
                    </form>
                </table>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-body">
                <h3>Tavarat</h3>
                <table class="table" id="table_tavarat">
                    <tr>
                        <th>Koodi</th>
                        <th>Nimike</th>
                        <th>A</th>
                        <th>T</th>
                        <th>Määrä</th>
                    </tr>
                    <tr tal:repeat="tavara tilaus.tavarat">
                        <td class="tavara_col1"><input value="${tavara.koodi}"></td>
                        <td class="tavara_col2"><input value="${tavara.nimi}"></td>
                        <td class="tavara_col3"><input type="checkbox" ${'checked' if 'A' in tavara.tyyppi else ''}></td>
                        <td class="tavara_col4"><input type="checkbox" ${'checked' if 'T' in tavara.tyyppi else ''}></td>
                        <td class="tavara_col5"><input value="${tavara.maara}"></td>
                    </tr>
                    <a name="tavarat"></a>
                    <form method="POST" action="#tavarat">
                        <input type="hidden" name="data" value="tavara">
                        <tr>
                            <td class="tavara_col1"><input name="koodi"></td>
                            <td class="tavara_col2"><input name="nimi"></td>
                            <td class="tavara_col3"><input name="A" type="checkbox"></td>
                            <td class="tavara_col4"><input name="T" type="checkbox"></td>
                            <td class="tavara_col5"><input name="maara"></td>
                        </tr>
                        <tr>
                            <td colspan="5">
                                <input class="add_button" type="submit" value="Lisää uusi">
                            </td>
                        </tr>
                    </form>
                </table>
            </div>
        </div>
    </metal:main>
</metal:main>